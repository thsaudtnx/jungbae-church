<!DOCTYPE html>
<html lang="ko">

<head>
  <%- include("../partials/head") %>
</head>

<body>
  <%- include("../partials/header") %>
    <div class="container" style="padding-top: 100px; padding-bottom: 50px;">
      <h1 class="text-center">목회일기</h1>
      <div class="section-title"></div>

      <% if (locals.user && user.isAdmin) { %>
        <div style="text-align: right; margin-bottom: 1rem;">
          <a href="/admin/write/diaries" class="btn btn-primary">일기 등록</a>
        </div>
        <% } %>

          <div style="max-width: 800px; margin: 0 auto;">
            <% if (locals.diaries) { %>
              <% diaries.forEach(function(item) { %>
                <div
                  style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 2rem;">
                  <div style="border-left: 5px solid var(--color-primary); padding-left: 1rem; margin-bottom: 1rem;">
                    <h3 style="margin-bottom: 0.5rem;">
                      <%= item.title %>
                        <% if (locals.user && user.isAdmin) { %>
                          <span style="font-size: 0.8rem; font-weight: normal; margin-left: 10px;">
                            <a href="/admin/edit/diaries/<%= item.id %>" style="color: var(--color-primary);">수정</a> |
                            <a href="/admin/delete/diaries/<%= item.id %>" onclick="return confirm('정말 삭제하시겠습니까?')"
                              style="color: red;">삭제</a>
                          </span>
                          <% } %>
                    </h3>
                    <span style="color: var(--color-text-light); font-size: 0.9rem;">
                      <%= item.date %>
                    </span>
                  </div>
                  <p style="line-height: 1.8;">
                    <%= item.content %>
                  </p>
                </div>
                <% }); %>
                  <% } else { %>
                    <p class="text-center">등록된 일기가 없습니다.</p>
                    <% } %>
          </div>
    </div>
    <%- include("../partials/footer") %>
      <script src="/js/main.js"></script>
</body>

</html>