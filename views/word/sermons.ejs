<!DOCTYPE html>
<html lang="ko">

<head>
    <%- include('../partials/head') %>
        <style>
            .sermon-list {
                display: grid;
                gap: 20px;
            }

            .sermon-item {
                background: #f9f9f9;
                padding: 20px;
                border-radius: 8px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .video-container {
                position: relative;
                padding-bottom: 56.25%;
                /* 16:9 */
                height: 0;
                overflow: hidden;
                margin-top: 20px;
            }

            .video-container iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
        </style>
</head>

<body>
    <%- include('../partials/header') %>

        <div class="container" style="padding-top: 100px; padding-bottom: 50px;">
            <h1 class="text-center">주일 설교</h1>
            <div class="section-title"></div>

            <% if (locals.user && user.isAdmin) { %>
                <div style="text-align: right; margin-bottom: 1rem;">
                    <a href="/admin/write/sermons" class="btn btn-primary">설교 등록</a>
                </div>
                <% } %>

                    <style>
                        .board-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-top: 2rem;
                            background: white;
                            border-radius: 12px;
                            overflow: hidden;
                            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
                        }

                        .board-table th {
                            background: #f8f9fa;
                            padding: 1.2rem;
                            font-weight: 600;
                            color: var(--color-text);
                            border-bottom: 2px solid #edf2f7;
                            text-align: left;
                        }

                        .board-table td {
                            padding: 1.2rem;
                            border-bottom: 1px solid #edf2f7;
                            vertical-align: middle;
                        }

                        .board-table tr:hover {
                            background-color: #fcfdfe;
                        }

                        .board-title {
                            font-weight: 600;
                            color: var(--color-primary);
                            font-size: 1.1rem;
                            text-decoration: none;
                        }

                        .board-meta {
                            font-size: 0.9rem;
                            color: #777;
                            margin-top: 4px;
                        }
                    </style>

                    <table class="board-table">
                        <thead>
                            <tr>
                                <th style="width: 70%;">제목</th>
                                <th style="width: 15%;">날짜</th>
                                <% if (locals.user && user.isAdmin) { %>
                                    <th style="width: 15%; text-align: center;">관리</th>
                                    <% } %>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (locals.sermons && sermons.length> 0) { %>
                                <% sermons.forEach(function(item) { %>
                                    <tr>
                                        <td>
                                            <a href="/word/sermons/<%= item.id %>" class="board-title">
                                                <%= item.title %>
                                            </a>
                                            <div class="board-meta">
                                                <%= item.preacher %>
                                            </div>
                                        </td>
                                        <td>
                                            <span style="color: #666; font-size: 0.9rem;">
                                                <%= item.date %>
                                            </span>
                                        </td>
                                        <% if (locals.user && user.isAdmin) { %>
                                            <td style="text-align: center; font-size: 0.85rem;">
                                                <a href="/admin/edit/sermons/<%= item.id %>"
                                                    style="color: var(--color-secondary); margin-right: 8px;"><i
                                                        class="fas fa-edit"></i></a>
                                                <a href="/admin/delete/sermons/<%= item.id %>"
                                                    onclick="return confirm('정말 삭제하시겠습니까?')" style="color: #e74c3c;"><i
                                                        class="fas fa-trash"></i></a>
                                            </td>
                                            <% } %>
                                    </tr>
                                    <% }); %>
                                        <% } else { %>
                                            <tr>
                                                <td colspan="<%= (locals.user && user.isAdmin) ? 3 : 2 %>"
                                                    class="text-center" style="padding: 3rem; color: #aaa;">
                                                    등록된 설교가 없습니다.
                                                </td>
                                            </tr>
                                            <% } %>
                        </tbody>
                    </table>
        </div>

        <%- include('../partials/footer') %>
            <script src="/js/main.js"></script>
</body>

</html>