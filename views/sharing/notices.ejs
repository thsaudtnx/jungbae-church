<!DOCTYPE html>
<html lang="ko">

<head>
  <%- include("../partials/head") %>
</head>

<body>
  <%- include("../partials/header") %>
    <div class="container" style="padding-top: 100px; padding-bottom: 50px;">
      <h1 class="text-center">공지사항</h1>
      <div class="section-title"></div>

      <% if (locals.user && user.isAdmin) { %>
        <div style="text-align: right; margin-bottom: 1rem;">
          <a href="/admin/write/notices" class="btn btn-primary">공지 등록</a>
        </div>
        <% } %>

          <div style="max-width: 1000px; margin: 0 auto; overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; min-width: 600px;">
              <thead>
                <tr style="border-bottom: 2px solid var(--color-text);">
                  <th style="padding: 1rem; width: 60px;">No.</th>
                  <th style="padding: 1rem;">제목</th>
                  <th style="padding: 1rem; width: 120px;">날짜</th>
                  <% if (locals.user && user.isAdmin) { %>
                    <th style="padding: 1rem; width: 120px;">관리</th>
                    <% } %>
                </tr>
              </thead>
              <tbody>
                <% if (locals.notices) { %>
                  <% notices.forEach(function(item, index) { %>
                    <tr style="border-bottom: 1px solid #eee;">
                      <td style="padding: 1rem; text-align: center; color: #999;">
                        <%= notices.length - index %>
                      </td>
                      <td style="padding: 1rem;"><a href="#" style="font-weight: 500;">
                          <%= item.title %>
                        </a></td>
                      <td style="padding: 1rem; text-align: center; color: #666;">
                        <%= item.date %>
                      </td>
                      <% if (locals.user && user.isAdmin) { %>
                        <td style="padding: 1rem; text-align: center;">
                          <a href="/admin/edit/notices/<%= item.id %>"
                            style="color: var(--color-primary); margin-right: 5px;">수정</a>
                          <a href="/admin/delete/notices/<%= item.id %>" onclick="return confirm('정말 삭제하시겠습니까?')"
                            style="color: red;">삭제</a>
                        </td>
                        <% } %>
                    </tr>
                    <% }); %>
                      <% } else { %>
                        <tr>
                          <td colspan="3" class="text-center" style="padding: 2rem;">등록된 공지가 없습니다.</td>
                        </tr>
                        <% } %>
              </tbody>
            </table>
          </div>
    </div>
    <%- include("../partials/footer") %>
      <script src="/js/main.js"></script>
</body>

</html>