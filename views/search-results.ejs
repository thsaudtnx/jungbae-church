<!DOCTYPE html>
<html lang="ko">

<head>
    <%- include('./partials/head') %>
</head>

<body>
    <%- include('./partials/header') %>

        <div class="container" style="padding-top: 130px; padding-bottom: 80px; min-height: 80vh;">
            <div style="max-width: 900px; margin: 0 auto;">
                <div style="margin-bottom: 3rem; text-align: center;">
                    <h1 style="font-size: 2.2rem; margin-bottom: 1.5rem;">통합 검색</h1>
                    <form action="/search" method="GET"
                        style="display: flex; gap: 10px; max-width: 600px; margin: 0 auto; background: #f8f9fa; padding: 8px; border-radius: 50px; border: 1px solid #eee;">
                        <input type="text" name="q" value="<%= keyword %>" placeholder="검색어를 입력하세요 (예: 믿음, 사랑)"
                            style="flex: 1; border: none; background: transparent; padding: 0 20px; font-size: 1.1rem; outline: none;">
                        <button type="submit" class="btn btn-primary" style="border-radius: 50px; padding: 10px 25px;">
                            <i class="fas fa-search"></i> 검색
                        </button>
                    </form>
                </div>

                <div class="search-info"
                    style="margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid #eee;">
                    <% if (keyword) { %>
                        <p style="font-size: 1.1rem;">
                            <strong>'<%= keyword %>'</strong>에 대한 검색 결과입니다.
                        </p>
                        <% } %>
                </div>

                <% if (results && results.length> 0) { %>
                    <div class="results-list">
                        <% results.forEach(function(category) { %>
                            <div class="category-group" style="margin-bottom: 3rem;">
                                <h2
                                    style="font-size: 1.3rem; color: var(--color-primary); margin-bottom: 1.2rem; display: flex; align-items: center; gap: 10px;">
                                    <span
                                        style="width: 4px; height: 18px; background: var(--color-primary); border-radius: 2px;"></span>
                                    <%= category.category %> (<%= category.items.length %>)
                                </h2>
                                <div
                                    style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.03);">
                                    <% category.items.forEach(function(item, index) { %>
                                        <a href="<%= item.link %>"
                                            style="display: block; padding: 1.2rem 1.5rem; text-decoration: none; color: inherit; transition: all 0.2s; border-bottom: <%= index === category.items.length - 1 ? 'none' : '1px solid #f5f5f5' %>;"
                                            class="search-item">
                                            <div
                                                style="display: flex; justify-content: space-between; align-items: center;">
                                                <div>
                                                    <h3
                                                        style="font-size: 1.1rem; font-weight: 500; margin-bottom: 0.3rem;">
                                                        <%= item.title %>
                                                    </h3>
                                                    <span style="font-size: 0.85rem; color: #999;"><i
                                                            class="far fa-calendar-alt"></i>
                                                        <%= item.date %>
                                                    </span>
                                                </div>
                                                <i class="fas fa-chevron-right"
                                                    style="color: #ccc; font-size: 0.9rem;"></i>
                                            </div>
                                        </a>
                                        <% }); %>
                                </div>
                            </div>
                            <% }); %>
                    </div>
                    <% } else if (keyword) { %>
                        <div style="text-align: center; padding: 5rem 0; color: #999;">
                            <i class="fas fa-search" style="font-size: 4rem; margin-bottom: 1.5rem; opacity: 0.2;"></i>
                            <p style="font-size: 1.2rem;">검색 결과가 없습니다.<br>다른 검색어를 입력해 보세요.</p>
                        </div>
                        <% } %>
            </div>
        </div>

        <style>
            .search-item:hover {
                background-color: #fafafa;
                padding-left: 2rem !important;
            }

            .search-item:hover h3 {
                color: var(--color-primary);
            }
        </style>

        <%- include('./partials/footer') %>
            <script src="/js/main.js"></script>
</body>

</html>